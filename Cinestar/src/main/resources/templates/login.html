<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<title>Iniciar Sesión</title>
<link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css"
	th:href="@{/bootstrap/css/bootstrap.min.css}">
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Cookie">
<link rel="stylesheet" href="/fonts/font-awesome.min.css"
	th:href="@{/fonts/font-awesome.min.css}">
<link rel="stylesheet" href="/css/Pretty-Footer.css"
	th:href="@{/css/Pretty-Footer.css}">
<link rel="stylesheet" href="/css/styles.css"
	th:href="@{/css/styles.css}">

<link rel="stylesheet" href="/fonts/ionicons.min.css"
	th:href="@{/fonts/ionicons.min.css}">
<link rel="stylesheet" href="/css/Highlight-Phone.css"
	th:href="@{/css/Highlight-Phone.css}">
<link rel="stylesheet" href="/css/Login-Form-Dark.css"
	th:href="@{/css/Login-Form-Dark.css}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

<body>
	
	<nav class="navbar navbar-light navbar-expand-md navbar-default 7">
        <div class="container-fluid"><a class="navbar-brand" href="/index"><img id="logo" src="/img/logo.jpeg" alt="cinestar.jpg"></a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div
                class="collapse navbar-collapse 7" id="navcol-1">
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item" ><a class="nav-link" href="/index">Cartelera</a></li>
                    <li class="nav-item"><a class="nav-link" href="/sedes">Sedes</a></li>
                    <li class="nav-item"><a class="nav-link" href="/tarifario">Tarifario</a></li>
                    <li class="nav-item"><a class="nav-link" href="/perfil">Perfil</a></li>
                    <li class="nav-item"><a class="nav-link" href="/cine">Nosotros</a></li>
                </ul>
        	</div>
        	<div class="dropdown 7"><a class="dropdown-toggle text-info"  data-toggle="dropdown" aria-expanded="false"  id="username" 
         		><em class="fa fa-user-circle-o"></em>&nbsp;</a>
            	<form th:action="@{/logout}" method="post"><div class="dropdown-menu"><button class="dropdown-item"  type="submit">Cerrar Sesión</button></div></form>
        	</div>
        </div>
    </nav>
	
	<div class="container">
		<div class="row align-items-center">
			<div class="col-md-5 offset-0">
				<h1>
					Películas<img id="claqueta" src="/img/claqueta.jpg" alt="claqueta.jpg">
				</h1>
			</div>


		</div>
	</div>
	<div class="login-dark">
		<form class="col-12" th:action="@{/login}" method="post">
			<h2 class="sr-only">Login Form</h2>
			<div class="illustration">
				<em class="icon ion-ios-locked-outline"></em>
			</div>
			<div class="form-group">
				<input class="form-control" type="text" name="username"
					placeholder="Nombre de Usuario">
			</div>
			<div class="form-group">
				<input class="form-control" type="password" name="password"
					placeholder="Contraseña">
			</div>
			<div class="form-group">
				<button class="btn btn-primary btn-block" type="submit">Ingresar</button>
				<a class="btn btn-primary btn-block" data-toggle="modal" data-target="#exampleModal">Registrar</a>
			</div>
		</form>
		<div th:if="${param.error}" class="alert alert-danger" role="alert">
			Invalid username and password.</div>
		<div th:if="${param.logout}" class="alert alert-success" role="alert">
			You have been logged out.</div>
	</div>
	
	
	<div></div>
	
		<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		    <form id="registrar-usuario" th:action="@{/registrar-usuario}" method="post">
		   
		      <div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      
		      <div class="modal-body">			      
		          <div class="form-group">
				    <label for="exampleInputName">Name</label>
				    <input type="text" class="form-control" name="name" id="exampleInputName" aria-describedby="emailHelp" placeholder="Enter name">
				  </div>
				  <div class="form-group">
				    <label for="exampleInputName">Last Name</label>
				    <input type="text" class="form-control" name="lastname" id="exampleInputLastName" aria-describedby="emailHelp" placeholder="Enter last name">
				  </div>
				  <div class="form-group">
				    <label for="exampleInputEmail1">Email address</label>
				    <input type="email" class="form-control" name="email" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
				  </div>
				  <div class="form-group">
				    <label for="exampleUsername">Username</label>
				    <input type="text" class="form-control" name="username" id="exampleInputUsername" aria-describedby="emailHelp" placeholder="Enter username">
				  </div>
				  <div class="form-group">
				    <label for="exampleInputPassword1">Password</label>
				    <input type="password" class="form-control" name="password" id="exampleInputPassword1" placeholder="Password">
				  </div>
		      </div>
		      
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		        <button type="button" class="btn btn-primary" onclick="verificar()">Sign Up</button>
		      </div>
		      
		    </form>
		    </div>
		  </div>
		</div>

	
	
	
	
	<footer>
		<div id="footer7"></div>
	</footer>
	<script> 
    $(function(){
      $("#footer7").load("../components/footer.html"); 
    });
    
    verificar = (event) => {
        name = document.getElementById("exampleInputName").value
        lastname = document.getElementById("exampleInputLastName").value
        email = document.getElementById("exampleInputEmail1").value
        username = document.getElementById("exampleInputUsername").value
        password = document.getElementById("exampleInputPassword1").value
        console.log(name + lastname + email + username + password)
        
        formulario = document.getElementById("registrar-usuario")
        console.log(formulario)
        
        if ( name.trim().length > 0 && lastname.trim().length > 0  && email.trim().length > 0 && username.trim().length > 0 && password.trim().length > 0 ) {
        	alert("Registro exitoso!")
        	formulario.submit();
	   	}
	   	else {
	   	    alert("El fomulario contiene campos con espacios vacios o vacios su totalidad");
	   	}
     }
    
    </script>
	<div th:if="${param.logout}" class="alert alert-success" role="alert">
		You have been logged out.</div>
	<script src="/js/jquery.min.js"></script>
	<script src="/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript">
    var user = "[[${#httpServletRequest.remoteUser}]]";
    if (user == ""){
    	user = "Iniciar Sesión";
    	$("#username").attr('data-toggle','');
    	document.getElementById("username").href="/login";
    }
    document.getElementById("username").innerHTML=user;
    </script>
</body>

</html>